<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manhyo Reader</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#8b5cf6;
  --glass:rgba(255,255,255,.08);
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#3b0764,#070707 70%);
  color:white;
  font-family:"Courier New",monospace;
}

/* CENTER LOGIN */
#login{
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:16px;
}

#title{
  font-family:"Space Grotesk",sans-serif;
  font-size:4rem;
}

input{
  padding:12px;
  width:200px;
  border-radius:12px;
  border:none;
  text-align:center;
}

button{
  padding:12px 24px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  background:linear-gradient(135deg,var(--accent),#6d28d9);
  color:white;
  font-weight:700;
}

/* SECTIONS */
.section{display:none}
.section.active{display:flex}

/* MAIN */
#main{
  padding:30px;
  gap:30px;
}

/* LEFT */
#left{flex:1}

/* RIGHT */
#right{
  flex:1;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
}

.card{
  background:var(--glass);
  backdrop-filter:blur(16px);
  border-radius:18px;
  padding:18px;
}

/* LIBRARY */
#library li{
  cursor:pointer;
  margin:10px 0;
  text-decoration:underline;
}

/* FULLSCREEN */
#overlay{
  display:none;
  position:fixed;
  inset:0;
  background:black;
  z-index:9999;
}

#reader{
  width:100%;
  height:100%;
  border:none;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="section active">
  <h1 id="title">MANHYO</h1>
  <h3 id="stepText">Password 1</h3>
  <input id="pw" type="password" placeholder="Enter password">
  <button onclick="checkPassword()">Enter</button>
</div>

<!-- MAIN -->
<div id="main" class="section">

  <div id="left">
    <h2>Library</h2>
    <ul id="library"></ul>
    <button onclick="logout()">Logout</button>
  </div>

  <div id="right">
    <div class="card">
      <h3>AsuraScans</h3>
      <button onclick="openSite('AsuraScans','https://asuracomic.net')">Open</button>
    </div>
    <div class="card">
      <h3>Comix</h3>
      <button onclick="openSite('Comix','https://comix.to')">Open</button>
    </div>
    <div class="card">
      <h3>Ezmanga</h3>
      <button onclick="openSite('Ezmanga','https://ezmanga.org')">Open</button>
    </div>
  </div>

</div>

<!-- VIEWER -->
<div id="overlay">
  <iframe id="reader" allow="fullscreen"></iframe>
</div>

<script>
const steps = ["D3r5t0n3","Password","incorrect"];
let step = 0;

const loginEl = document.getElementById("login");
const mainEl = document.getElementById("main");
const stepText = document.getElementById("stepText");
const pwInput = document.getElementById("pw");
const libraryEl = document.getElementById("library");
const overlay = document.getElementById("overlay");
const reader = document.getElementById("reader");

/* AUTO LOGIN */
if(localStorage.loggedIn){
  showMain();
}

/* PASSWORD FLOW */
function checkPassword(){
  if(pwInput.value === steps[step]){
    step++;
    pwInput.value = "";
    if(step === steps.length){
      localStorage.loggedIn = "true";
      showMain();
    }else{
      stepText.textContent = `Password ${step+1}`;
    }
  }else{
    alert("Wrong password");
  }
}

function showMain(){
  loginEl.classList.remove("active");
  mainEl.classList.add("active");
  loadLibrary();
}

function logout(){
  localStorage.clear();
  location.reload();
}

/* OPEN SITE */
function openSite(site,url){
  const title = prompt("Manhwa / Manga name?");
  if(!title) return;

  const chapter = prompt("Chapter / Episode?");
  if(!chapter) return;

  saveReading(site,title,chapter,url);

  overlay.style.display="block";
  reader.src=url;
  setTimeout(()=>overlay.requestFullscreen(),100);
}

/* LIBRARY */
function saveReading(site,title,chapter,url){
  let lib = JSON.parse(localStorage.library||"[]");
  lib.push({site,title,chapter,url});
  localStorage.library = JSON.stringify(lib);
  loadLibrary();
}

function loadLibrary(){
  libraryEl.innerHTML="";
  let lib = JSON.parse(localStorage.library||"[]");
  lib.forEach(item=>{
    let li=document.createElement("li");
    li.textContent =
      `${item.site} — ${item.title} — ${item.chapter}`;
    li.onclick=()=>openSite(item.site,item.url);
    libraryEl.appendChild(li);
  });
}

/* ESC EXIT */
document.addEventListener("fullscreenchange",()=>{
  if(!document.fullscreenElement){
    overlay.style.display="none";
    reader.src="";
  }
});
</script>

</body>
</html>
